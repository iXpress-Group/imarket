{"ast":null,"code":"var _jsxFileName = \"/home/engineersticity/Desktop/imarket/src/pages/product.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport '../css/pages/product.css';\nimport Header from '../components/header';\nimport Footer from '../components/footer'; // import ProductComponent from '../components/product_component';\n\nimport { Link } from \"react-router-dom\"; // import DetailsComponent from '../components/details_component';\n\nlet countCart = 0;\nlet cartList = [];\n\nclass Product extends Component {\n  constructor(props) {\n    super(props);\n\n    this.runApps = () => {\n      this.refreshCart();\n      this.refreshList();\n    };\n\n    this.refreshList = () => {\n      axios.get(\"https://engineersticity.pythonanywhere.com/api/products/\").then(res => this.setState({\n        List: res.data,\n        Test: true\n      })).catch(err => console.log(err));\n    };\n\n    this.refreshCart = () => {\n      axios.get(\"https://engineersticity.pythonanywhere.com/api/cart/\").then(res => cartList = res.data).catch(err => console.log(err));\n    };\n\n    this.addCart = (category, name, description, image, former_price, price, productTrackingNo) => {\n      // e.preventDefault();\n      console.log(this.state + 'bullshit');\n      let form_data = new FormData();\n      form_data.append('category', category);\n      form_data.append('name', name);\n      form_data.append('description', description);\n      form_data.append('image', image);\n      form_data.append('former_price', former_price);\n      form_data.append('price', price);\n      form_data.append('productTrackingNo', productTrackingNo);\n      let url = 'https://engineersticity.pythonanywhere.com/api/cart/';\n      axios.post(url, form_data, {\n        headers: {\n          'content-type': 'multipart/form-data'\n        }\n      }).then(res => {\n        console.log(res.data); // alert('Product Added ' + res.data.name);\n        // countCart += 1;\n      }).catch(err => console.log(err));\n    };\n\n    this.checkCart = (category, name, description, image, former_price, price, productTrackingNo) => {\n      const viewCartItem = this.state.viewCartItem;\n      if (!this.state.Test) return React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-shopping-cart fa-spin spinnerTest\",\n        style: {\n          fontSize: 60\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }));\n      const newList = cartList.filter(cartItem => cartItem.complete === viewCartItem);\n      let newCartList = newList.map(cartItem => cartItem);\n\n      for (let i = 0; i <= newCartList.length; i++) {\n        if (newCartList.length === 0) {\n          this.addCart(category, name, description, image, former_price, price, productTrackingNo);\n          alert(name + \" added to cart \" + newCartList[i].productTrackingNo);\n          window.location.reload();\n          break;\n        } else {\n          if (newCartList[i].productTrackingNo === productTrackingNo) {\n            countCart += 1;\n          }\n        }\n      }\n\n      if (countCart === 0) {\n        this.addCart(category, name, description, image, former_price, price, productTrackingNo);\n        alert(name + \" added to cart \");\n        window.location.reload();\n      } else {\n        alert(name + \" is already in your cart!! \");\n        window.location.reload();\n      }\n    };\n\n    this.renderItems = () => {\n      const viewItem = this.state.viewItem;\n      if (!this.state.Test) return React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-shopping-cart fa-spin spinnerTest\",\n        style: {\n          fontSize: 60\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }));\n      const newItems = this.state.List.filter(item => item.complete === viewItem);\n      return newItems.map(item => React.createElement(\"div\", {\n        className: \"col-md-3 col-sm-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"product-grid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"product-image\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/dev/product-details/\" + item.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        className: \"pic-1\",\n        src: item.image,\n        alt: '',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }), React.createElement(\"img\", {\n        className: \"pic-2\",\n        src: item.image_alt,\n        alt: '',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      })), React.createElement(\"span\", {\n        className: \"product-discount-label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, \"-\", item.discount, \"%\"), React.createElement(\"ul\", {\n        className: \"social\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: item.image,\n        \"data-tip\": \"Quick View\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-search\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }))), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: item.image_alt,\n        \"data-tip\": \"Add to Wishlist\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-shopping-bag\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }))), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        \"data-tip\": \"Add to Cart\",\n        href: item.image,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-shopping-cart\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }))))), React.createElement(\"div\", {\n        className: \"product-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        className: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/dev/product-details/\" + item.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, item.name)), React.createElement(\"span\", {\n        className: \"product-category\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, \"Per pcs\"), React.createElement(\"div\", {\n        className: \"price\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, \"Frw \", item.price, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, \"Frw \", item.former_price)), React.createElement(\"p\", {\n        onClick: this.checkCart.bind(this, item.category, item.name, item.description, item.image, item.former_price, item.price, item.productTrackingNo),\n        id: \"btnSearch\",\n        className: \"add-to-cart\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, \"ADD TO CART\")))));\n    };\n\n    this.state = {\n      uploaded: false,\n      List: [],\n      Cart: [],\n      Test: false\n    };\n  }\n\n  componentDidMount() {\n    setTimeout(() => {\n      this.runApps();\n    }, 2000);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, React.createElement(Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"Products-page\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"product-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, \"Products\")), React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, this.renderItems()))), React.createElement(Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Product;","map":{"version":3,"sources":["/home/engineersticity/Desktop/imarket/src/pages/product.js"],"names":["React","Component","axios","Header","Footer","Link","countCart","cartList","Product","constructor","props","runApps","refreshCart","refreshList","get","then","res","setState","List","data","Test","catch","err","console","log","addCart","category","name","description","image","former_price","price","productTrackingNo","state","form_data","FormData","append","url","post","headers","checkCart","viewCartItem","fontSize","newList","filter","cartItem","complete","newCartList","map","i","length","alert","window","location","reload","renderItems","viewItem","newItems","item","id","image_alt","discount","bind","uploaded","Cart","componentDidMount","setTimeout","render"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport axios from 'axios';\nimport '../css/pages/product.css';\nimport Header from '../components/header';\nimport Footer from '../components/footer';\n// import ProductComponent from '../components/product_component';\nimport {Link} from \"react-router-dom\";\n\n// import DetailsComponent from '../components/details_component';\nlet countCart = 0;\nlet cartList = [];\n\nclass Product extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            uploaded: false,\n            List: [],\n            Cart: [],\n            Test: false\n\n        };\n    }\n\n\n    componentDidMount() {\n        setTimeout(() => {\n            this.runApps();\n        }, 2000)\n    };\n\n    runApps = () => {\n        this.refreshCart();\n        this.refreshList();\n    };\n\n    refreshList = () => {\n        axios\n            .get(\"https://engineersticity.pythonanywhere.com/api/products/\")\n            .then(res => this.setState({List: res.data, Test: true}))\n            .catch(err => console.log(err));\n    };\n    refreshCart = () => {\n        axios\n            .get(\"https://engineersticity.pythonanywhere.com/api/cart/\")\n            .then(res => cartList = res.data)\n            .catch(err => console.log(err));\n    };\n\n    addCart = (category, name, description, image, former_price, price, productTrackingNo) => {\n        // e.preventDefault();\n        console.log(this.state + 'bullshit');\n        let form_data = new FormData();\n        form_data.append('category', category);\n        form_data.append('name', name);\n        form_data.append('description', description);\n        form_data.append('image', image);\n        form_data.append('former_price', former_price);\n        form_data.append('price', price);\n        form_data.append('productTrackingNo', productTrackingNo);\n\n        let url = 'https://engineersticity.pythonanywhere.com/api/cart/';\n        axios.post(url, form_data, {\n            headers: {\n                'content-type': 'multipart/form-data'\n            }\n        })\n            .then(res => {\n                console.log(res.data);\n                // alert('Product Added ' + res.data.name);\n                // countCart += 1;\n\n            })\n            .catch(err => console.log(err));\n    };\n\n    checkCart = (category, name, description, image, former_price, price, productTrackingNo) => {\n        const {viewCartItem} = this.state;\n        if (!this.state.Test) return <p><i className=\"fa fa-shopping-cart fa-spin spinnerTest\" style={{fontSize: 60}}/>\n        </p>;\n        const newList = cartList.filter(\n            cartItem => cartItem.complete === viewCartItem\n        );\n        let newCartList = newList.map(cartItem => cartItem);\n        for (let i = 0; i <= newCartList.length; i++) {\n            if (newCartList.length === 0) {\n                this.addCart(category, name, description, image, former_price, price, productTrackingNo);\n                alert(name + \" added to cart \" + newCartList[i].productTrackingNo);\n                window.location.reload();\n                break;\n            } else {\n                if (newCartList[i].productTrackingNo === productTrackingNo) {\n                    countCart+=1;\n                }\n            }\n        }\n\n        if (countCart === 0){\n            this.addCart(category, name, description, image, former_price, price, productTrackingNo);\n            alert(name + \" added to cart \");\n            window.location.reload();\n        }else {\n            alert(name + \" is already in your cart!! \");\n            window.location.reload();\n        }\n    };\n\n    renderItems = () => {\n        const {viewItem} = this.state;\n        if (!this.state.Test) return <p><i className=\"fa fa-shopping-cart fa-spin spinnerTest\" style={{fontSize: 60}}/>\n        </p>;\n        const newItems = this.state.List.filter(\n            item => item.complete === viewItem\n        );\n        return newItems.map(item => (\n            <div className=\"col-md-3 col-sm-6\">\n                <div className=\"product-grid\">\n                    <div className=\"product-image\">\n                        <Link to={\"/dev/product-details/\" + item.id}>\n                            <img className=\"pic-1\" src={item.image} alt={''}/>\n                            <img className=\"pic-2\" src={item.image_alt} alt={''}/>\n\n                        </Link>\n                        <span className=\"product-discount-label\">-{item.discount}%</span>\n                        <ul className=\"social\">\n                            <li><a href={item.image} data-tip=\"Quick View\"><i className=\"fa fa-search\"/></a>\n                            </li>\n                            <li><a href={item.image_alt} data-tip=\"Add to Wishlist\"><i\n                                className=\"fa fa-shopping-bag\"/></a>\n                            </li>\n                            <li><a data-tip=\"Add to Cart\" href={item.image}><i\n                                className=\"fa fa-shopping-cart\"/></a></li>\n                        </ul>\n                    </div>\n                    <div className=\"product-content\">\n                        <h3 className=\"title\">\n                            <Link to={\"/dev/product-details/\" + item.id}>{item.name}</Link>\n                        </h3>\n                        <span className=\"product-category\">Per pcs</span>\n                        <div className=\"price\">Frw {item.price}\n                            <span>Frw {item.former_price}</span>\n                        </div>\n                        <p onClick={this.checkCart.bind(this,\n                            item.category,\n                            item.name,\n                            item.description,\n                            item.image,\n                            item.former_price,\n                            item.price,\n                            item.productTrackingNo)}\n                           id=\"btnSearch\"\n                           className=\"add-to-cart\">ADD TO CART</p>\n                    </div>\n                </div>\n            </div>\n        ));\n    };\n\n    render() {\n        return (\n            <div>\n                <Header/>\n                <div className=\"Products-page\">\n                    <div className=\"product-title\">\n                        <p>Products</p>\n                    </div>\n                    <div className=\"container\">\n                        <div className=\"row\">\n                            {this.renderItems()}\n                        </div>\n                    </div>\n                </div>\n                <Footer/>\n            </div>\n        )\n    }\n}\n\nexport default Product;\n"]},"metadata":{},"sourceType":"module"}